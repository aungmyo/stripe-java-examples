# Stripe webhooks endpoint example, using Java and Spark 1.x

This is a simple example project illustrating how to implement a [Stripe webhooks endpoint](https://stripe.com/docs/webhooks).

This example uses the Spark framework version 1.x in order to be compatible with Java 1.7. If you're using Java 1.8 or later, you should look at the example using Spark 2.x [here](../stripe-webhooks-spark2).

Requirements
============

- Java 1.7 and later.
- Maven (<https://maven.apache.org/>)

The project has some dependencies, Maven will take care of downloading everything.

Usage
=====

Clone the repository:

    git clone https://github.com/olivierbellone/stripe-java-examples.git

Move into the project's directory:

    cd stripe-java-examples/stripe-webhooks-spark1

Update the `src/main/resources/stripe/keys.ini` file with your secret API key (available in the [API Keys tab](https://dashboard.stripe.com/account/apikeys) of your account settings).

Compile the project using Maven:

    mvn compile

Run the project:

    mvn exec:java

In your [webhooks settings](https://dashboard.stripe.com/account/webhooks), add a new webhook endpoint with URL: <http://YOUR_HOST.com:4567/webhooks>.

If the machine you're using doesn't have an URL directly accessible from the internet, you can use [ngrok](https://ngrok.com/) to set up a tunnel. After installing ngrok, simply type:

    ngrok http 4567

to set up the tunnel, then add a new webhook endpoint with the forwarding URL generated by ngrok, e.g. <http://1c6d064b.ngrok.io/webhooks>.

